# 2026-01-16 本地服务器支持城市图片与文件代理

## 问题
- 本地用 `start-server.py` 启动时，点击城市弹图会失败：
  - 本地服务器没有实现 `/api/city-photos` 和 `/api/file`
  - 弹窗加载态曾使用空 `img src`，浏览器会请求当前页面导致“HTTP 200 返回 HTML”的假象

## 修复
- `jianghu.html`
  - 弹窗在“加载中/无图片”状态不再设置 `img src`，避免请求当前页造成误判
- `start-server.py`
  - 新增 `/api/file`：本地文件代理读取 `AI+X_history_data/**`
  - 新增 `/api/city-photos`：扫描 `AI+X_history_data/地图/<城市>/` 下的图片并返回列表
  - 新增 `/api/geo`：代理拉取地图 GeoJSON（与线上逻辑一致）

## 本地验证
- `/api/city-photos` 应能返回 `嘉兴` 及其图片 `src`（走 `/api/file?path=...`）
- 复制返回的 `src` 打开应能直接出图

