# 2026-01-16-Vercel部署自定义域名配置

## 用户需求
用户购买了域名 `aixpg.one`，需要在 Vercel 上配置部署。
提供了 Namecheap 域名管理界面截图和 Vercel 域名配置报错截图。

## 你截图里的问题是什么
- Vercel 里 `aixpg.one` / `www.aixpg.one` 都显示 **Invalid Configuration**：通常是 DNS 记录没按 Vercel 要求指向，或有冲突记录（多条 A / CNAME / URL Redirect）。
- 你看到 `aixpg.one -> 307 www.aixpg.one`：说明你当前访问根域会被重定向到 `www`，但 `www` 的 DNS 还没正确指到 Vercel，所以 Vercel 校验失败。

## 最省事方案（推荐）：把 DNS Nameserver 交给 Vercel
适合你不想折腾 DNS 记录、也不在别处托管邮箱/子域名的情况。

1. 在 Vercel：`Project -> Settings -> Domains` 添加
   - `aixpg.one`
   - `www.aixpg.one`
2. Vercel 会给你 **2 个 Nameserver**（NS）值。
3. 去 Namecheap（或你截图里正在用的 DNS 面板）：把域名的 Nameserver 改成 Vercel 给的那 2 个。
4. 等 5–30 分钟（最长可能到 24h）后，在 Vercel Domain 页面点 **Refresh**，直到变绿。

## 备选方案：继续用当前 DNS（Namecheap / DNSOwl），手动加记录（最常用）
你截图里 Nameserver 是 `ns1.dnsowl.com / ns2.dnsowl.com`，也就是 DNS 不在 Vercel；那就按下面加记录。

1. 在 DNS 管理面板（DNSOwl/Namecheap 的 Advanced DNS）添加/修改：
   - **A 记录（根域）**
     - Host: `@`
     - Value: `76.76.21.21`（Vercel 的 apex IP）
     - TTL: Auto
   - **CNAME（www）**
     - Host: `www`
     - Value: `cname.vercel-dns.com`
     - TTL: Auto
2. **删除/避免冲突**（非常关键）：
   - 不要同时存在多条 `@` 的 A 记录指向不同 IP
   - `www` 不要配 A 记录（要 CNAME）
   - 如果有 “URL Redirect / URL Forwarding” 指向 `www` 的规则，先关掉（让 Vercel 自己做重定向）
3. 回到 Vercel：`Project -> Settings -> Domains` 同样添加 `aixpg.one` 和 `www.aixpg.one`，然后点 **Refresh**。
4. 在 Vercel 里把你想作为主站的那个设为 **Primary**（建议用 `www.aixpg.one` 作为主域），并开启 **Redirect**（把另一个自动 301/308 跳转过来）。

## 快速自检（1 分钟）
- 在 DNS 面板确认只剩：
  - `@ -> A 76.76.21.21`
  - `www -> CNAME cname.vercel-dns.com`
- 等待生效后，Vercel Domains 页面两条都会从红色变为绿色。

## 你现在该怎么做（按你截图的现状）
你目前没把 NS 交给 Vercel（仍是 dnsowl），所以直接走“备选方案”的 A/CNAME 记录最快；改完后在 Vercel 点 Refresh 即可。

## 补充：Nameserver 不能混用（你最新截图就是这个问题）
如果你选择“把 NS 交给 Vercel”，就必须 **只保留 Vercel 的 NS**，不要夹杂 `dnsowl.com` 之类第三方 NS。
- 正确示例：`ns1.vercel-dns.com`、`ns2.vercel-dns.com`（其余 NS 输入框留空/删除）
- 错误示例：Vercel NS + `ns3.dnsowl.com` 混在一起
